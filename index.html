<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì†Œë°© ì‚¬ì—… ìœ í˜•ë³„ ì˜ˆì‚° ë° ì‚¬ë¡€ìˆ˜ í˜„í™©</title>
    <!-- Tailwind CSS CDN ë¡œë“œ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for better infographic contrast and readability */
        body { font-family: 'Inter', sans-serif; background-color: #f7fafc; }
        .bar-wrapper { height: 1.5rem; }
        /* Colors for the bar segments (using custom Tailwind config for fire theme) */
        .new-bg { background-color: #ef4444; /* Red - New */ }
        .cont-bg { background-color: #f59e0b; /* Amber - Continue */ }
        .impr-bg { background-color: #10b981; /* Emerald - Improve */ }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'fire-red': '#cc0000',
                        'fire-light': '#ffe0e0',
                    }
                }
            }
        }
    </script>
</head>
<body class="p-4 sm:p-8">

<div class="max-w-7xl mx-auto bg-white shadow-2xl rounded-xl p-6 md:p-10">

    <h1 class="text-3xl md:text-4xl font-extrabold text-fire-red text-center border-b-4 border-fire-red pb-4 mb-8 rounded-t-xl">
        ğŸ”¥ ì†Œë°© ì‚¬ì—… ìœ í˜•ë³„ í˜„í™© ë¶„ì„ (ì˜ˆì‚° ë° ì‚¬ë¡€ìˆ˜)
    </h1>

    <!-- Summary Box -->
    <div id="summary" class="bg-fire-light p-5 rounded-lg mb-8 text-center shadow-inner">
        <p class="text-xl font-semibold text-fire-red">
            ì „ì²´ ì‚¬ë¡€ìˆ˜ í•©ê³„: <span class="font-bold text-2xl">4,479</span>ê±´
        </p>
        <p class="text-xl font-semibold text-fire-red mt-2">
            ì „ì²´ ì˜ˆì‚° í•©ê³„: <span class="font-bold text-2xl">502,220,700</span>ì›
        </p>
    </div>

    <!-- Legend -->
    <div class="flex flex-wrap justify-center gap-4 text-sm font-medium mb-6">
        <div class="flex items-center"><span class="w-4 h-4 rounded-full new-bg mr-2"></span> ì‹ ê·œì‚¬ì—…</div>
        <div class="flex items-center"><span class="w-4 h-4 rounded-full cont-bg mr-2"></span> ê³„ì†ì‚¬ì—…</div>
        <div class="flex items-center"><span class="w-4 h-4 rounded-full impr-bg mr-2"></span> ê¸°ëŠ¥ê°œì„ </div>
    </div>

    <!-- Infographic Items Container -->
    <div id="infographics-container" class="space-y-6">
        <!-- Data items will be generated here -->
    </div>

</div>

<script>
    // ì›ë³¸ ë°ì´í„° (ì‚¬ë¡€ìˆ˜: C, ê¸ˆì•¡: A)
    const rawData = [
        { type: "ì†Œë°©ì‹œì„¤ ì ê²€ ë° ë°©í™”ê´€ë¦¬ ìš©ì—­", new_c: 74, new_a: 1165984, cont_c: 1718, cont_a: 29587826, impr_c: 493, impr_a: 62791 },
        { type: "ì†Œë°©ì‹œì„¤ ì‹ ì¶• ë° ê°œì„  ê³µì‚¬", new_c: 142, new_a: 45339401, cont_c: 1984, cont_a: 43543614, impr_c: 127, impr_a: 4433800 },
        { type: "ê²½ë³´ì„¤ë¹„ ê³µì‚¬", new_c: 16, new_a: 1863894, cont_c: 34, cont_a: 393196, impr_c: 21, impr_a: 602260 },
        { type: "ì†Œí™”ì„¤ë¹„ ê³µì‚¬", new_c: 32, new_a: 4183396, cont_c: 62, cont_a: 4425259, impr_c: 7, impr_a: 16348321 },
        { type: "ì œì—°ì„¤ë¹„ ê³µì‚¬", new_c: 2, new_a: 18000, cont_c: 2, cont_a: 26800, impr_c: 2, impr_a: 23000 },
        { type: "ì†Œë°©ìš©í’ˆ(ê²½ë³´ê¸°ë¥˜) êµ¬ë§¤", new_c: 46, new_a: 221588, cont_c: 139, cont_a: 1009311, impr_c: 58, impr_a: 219258 },
        { type: "ì†Œë°©ìš©í’ˆ(ì†Œí™”ê¸°ë¥˜) êµ¬ë§¤", new_c: 105, new_a: 603793, cont_c: 206, cont_a: 1785621, impr_c: 7, impr_a: 1334490 },
        { type: "ì†Œë°©ìš©í’ˆ(ê¸°ê³„ì¥ì¹˜ë¥˜) êµ¬ë§¤", new_c: 14, new_a: 189790, cont_c: 42, cont_a: 124425, impr_c: 17, impr_a: 204688 },
        { type: "ì†Œë°©ìš©í’ˆ(ë°©ì—¼ë¥˜) êµ¬ë§¤", new_c: 3, new_a: 173507, cont_c: 7, cont_a: 6835, impr_c: 1, impr_a: 100000 },
        { type: "ì†Œë°©ê¸°ë™ì¥ë¹„ êµ¬ë§¤", new_c: 2, new_a: 268268338, cont_c: 47, cont_a: 118563852, impr_c: 1, impr_a: 508 },
        { type: "ì†Œë°©ì •ë³´í†µì‹ ì¥ë¹„ êµ¬ë§¤", new_c: 26, new_a: 10319773, cont_c: 35, cont_a: 9282994, impr_c: 6, impr_a: 565058 },
        { type: "í™”ì¬ì§„ì••ì¥ë¹„ êµ¬ë§¤", new_c: 105, new_a: 13298175, cont_c: 113, cont_a: 5671454, impr_c: 7, impr_a: 249545 },
        { type: "êµ¬ì¡°ì¥ë¹„ êµ¬ë§¤", new_c: 120, new_a: 12909738, cont_c: 138, cont_a: 28907424, impr_c: 7, impr_a: 21460 },
        { type: "êµ¬ê¸‰ì¥ë¹„ êµ¬ë§¤", new_c: 105, new_a: 17317650, cont_c: 157, cont_a: 13224920, impr_c: 15, impr_a: 42217 },
        { type: "ì†Œë°©ìš© ì¸¡ì •ì¥ë¹„ êµ¬ë§¤", new_c: 15, new_a: 438763, cont_c: 19, cont_a: 654968, impr_c: 2, impr_a: 6000 },
        { type: "í˜¸í¡ë³´í˜¸ì¥ë¹„ êµ¬ë§¤", new_c: 23, new_a: 17941423, cont_c: 65, cont_a: 26858632, impr_c: 8, impr_a: 336682 },
        { type: "ë³´ì¡°ì¥ë¹„ êµ¬ë§¤", new_c: 40, new_a: 1478206, cont_c: 36, cont_a: 798863, impr_c: 1, impr_a: 5250 },
        { type: "ê¸°íƒ€ ì†Œë°©ì¥ë¹„ êµ¬ë§¤", new_c: 3, new_a: 911100, cont_c: 57, cont_a: 3769445, impr_c: 12, impr_a: 87414 }
    ];

    const container = document.getElementById('infographics-container');

    function formatNumber(num) {
        return num.toLocaleString('ko-KR');
    }

    rawData.forEach(item => {
        const totalAmount = item.new_a + item.cont_a + item.impr_a;
        const totalCase = item.new_c + item.cont_c + item.impr_c;

        // Calculate percentages for the stacked bar
        const new_p = (item.new_a / totalAmount) * 100 || 0;
        const cont_p = (item.cont_a / totalAmount) * 100 || 0;
        const impr_p = (item.impr_a / totalAmount) * 100 || 0;

        // Build the HTML structure for one item
        const itemHtml = `
            <div class="bg-white border border-gray-200 rounded-lg p-5 shadow-md hover:shadow-lg transition duration-300">
                
                <!-- Category Title and Total Amount -->
                <h3 class="text-lg font-bold text-gray-800 mb-2 border-b pb-1">
                    ${item.type}
                </h3>
                <div class="flex justify-between items-center mb-4 text-sm md:text-base">
                    <span class="font-semibold text-gray-600">ì´ ì˜ˆì‚°: <span class="text-fire-red font-extrabold">${formatNumber(totalAmount)}ì›</span></span>
                    <span class="font-semibold text-gray-600">ì´ ì‚¬ë¡€ìˆ˜: <span class="text-blue-600 font-extrabold">${formatNumber(totalCase)}ê±´</span></span>
                </div>

                <!-- Stacked Bar Chart (Budget Proportion) -->
                <div class="mb-4">
                    <p class="text-xs text-gray-500 mb-1">ì˜ˆì‚° êµ¬ì„± ë¹„ìœ¨ (ê¸ˆì•¡ ê¸°ì¤€)</p>
                    <div class="bar-wrapper flex rounded-md overflow-hidden bg-gray-200">
                        <!-- ì‹ ê·œì‚¬ì—… -->
                        <div class="new-bg bar text-white text-xs flex items-center justify-end px-1" 
                            style="width: ${new_p.toFixed(2)}%; min-width: ${new_p > 0 && new_p < 5 ? '5%' : '0'};" 
                            title="ì‹ ê·œì‚¬ì—…: ${formatNumber(item.new_a)}ì› (${new_p.toFixed(1)}%)">
                            ${new_p >= 5 ? new_p.toFixed(1) + '%' : ''}
                        </div>
                        <!-- ê³„ì†ì‚¬ì—… -->
                        <div class="cont-bg bar text-white text-xs flex items-center justify-end px-1" 
                            style="width: ${cont_p.toFixed(2)}%; min-width: ${cont_p > 0 && cont_p < 5 ? '5%' : '0'};" 
                            title="ê³„ì†ì‚¬ì—…: ${formatNumber(item.cont_a)}ì› (${cont_p.toFixed(1)}%)">
                            ${cont_p >= 5 ? cont_p.toFixed(1) + '%' : ''}
                        </div>
                        <!-- ê¸°ëŠ¥ê°œì„  -->
                        <div class="impr-bg bar text-white text-xs flex items-center justify-end px-1" 
                            style="width: ${impr_p.toFixed(2)}%; min-width: ${impr_p > 0 && impr_p < 5 ? '5%' : '0'};" 
                            title="ê¸°ëŠ¥ê°œì„ : ${formatNumber(item.impr_a)}ì› (${impr_p.toFixed(1)}%)">
                            ${impr_p >= 5 ? impr_p.toFixed(1) + '%' : ''}
                        </div>
                    </div>
                </div>

                <!-- Detailed Case Counts -->
                <div class="grid grid-cols-3 gap-2 text-center text-sm pt-3 border-t">
                    <div class="p-2 bg-red-50 rounded-md">
                        <span class="font-semibold text-red-600">ì‹ ê·œ ì‚¬ë¡€</span>
                        <div class="text-lg font-bold text-red-700">${formatNumber(item.new_c)}ê±´</div>
                    </div>
                    <div class="p-2 bg-amber-50 rounded-md">
                        <span class="font-semibold text-amber-600">ê³„ì† ì‚¬ë¡€</span>
                        <div class="text-lg font-bold text-amber-700">${formatNumber(item.cont_c)}ê±´</div>
                    </div>
                    <div class="p-2 bg-emerald-50 rounded-md">
                        <span class="font-semibold text-emerald-600">ê°œì„  ì‚¬ë¡€</span>
                        <div class="text-lg font-bold text-emerald-700">${formatNumber(item.impr_c)}ê±´</div>
                    </div>
                </div>

            </div>
        `;

        container.innerHTML += itemHtml;
    });
</script>

</body>
</html>
